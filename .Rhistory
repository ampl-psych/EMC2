data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
rm(list = ls())
devtools::load_all()
library(AccumulatR)
m1 <- race_spec() |>
add_accumulator("go1", "lognormal") |>
add_accumulator("go2", "lognormal") |>
add_pool("R1", "go1") |>
add_pool("R2", "go2") |>
add_outcome("R1", "R1") |>
add_outcome("R2", "R2") |>
finalize_model()
params_df <- build_param_matrix(m1, c(go1.meanlog = log(0.30),
go1.sdlog = 0.18,
go2.meanlog = log(0.32),
go2.sdlog = 0.18), n_trials = 50)
# 3. Simulate data and compute observed probabilities
sim <- simulate(m1, params_df)
data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
emc <- fit(emc, cores_for_chains = 1)
plot(emc)
log(.3)
log(.2)
emc <- fit(emc, cores_for_chains = 3)
emc <- fit(emc, cores_for_chains = 1)
emc <- fit(emc, cores_for_chains = 3)
remove.packages("EMC2")
remove.packages("AccumulatR")
.rs.restartR()
emc[[1]]$data
!emc[[1]]$model()$type == "AccumulatR"
# Simple joint test
# Take the first entry of the design list
# emc stores a design list (with length 1 for non-joint models)
# or for joint models length x where x is the number of joint components
design_in <- get_design(samples_LNR)[[1]]
library(EMC2)
devtools::load_all()
devtools::load_all()
# Simple joint test
# Take the first entry of the design list
# emc stores a design list (with length 1 for non-joint models)
# or for joint models length x where x is the number of joint components
design_in <- get_design(samples_LNR)[[1]]
prior_in <- get_prior(samples_LNR)
data_in <- get_data(samples_LNR)
prior_joint <- prior(list(a = design_in, b = design_in))
joint <- make_emc(list(data_in, data_in), list(a = design_in, b = design_in), prior_list = prior_joint)
AccumulatR::build_likelihood_context
devtools::load_all()
# Simple joint test
# Take the first entry of the design list
# emc stores a design list (with length 1 for non-joint models)
# or for joint models length x where x is the number of joint components
design_in <- get_design(samples_LNR)[[1]]
prior_in <- get_prior(samples_LNR)
data_in <- get_data(samples_LNR)
prior_joint <- prior(list(a = design_in, b = design_in))
joint <- make_emc(list(data_in, data_in), list(a = design_in, b = design_in), prior_list = prior_joint)
devtools::document()
# Simple joint test
# Take the first entry of the design list
# emc stores a design list (with length 1 for non-joint models)
# or for joint models length x where x is the number of joint components
design_in <- get_design(samples_LNR)[[1]]
prior_in <- get_prior(samples_LNR)
data_in <- get_data(samples_LNR)
prior_joint <- prior(list(a = design_in, b = design_in))
joint <- make_emc(list(data_in, data_in), list(a = design_in, b = design_in), prior_list = prior_joint)
usethis::use_import_from("AccumulatR", "build_likelihood_context")
devtools::load_all()
devtools::document()
# Simple joint test
# Take the first entry of the design list
# emc stores a design list (with length 1 for non-joint models)
# or for joint models length x where x is the number of joint components
design_in <- get_design(samples_LNR)[[1]]
prior_in <- get_prior(samples_LNR)
data_in <- get_data(samples_LNR)
prior_joint <- prior(list(a = design_in, b = design_in))
joint <- make_emc(list(data_in, data_in), list(a = design_in, b = design_in), prior_list = prior_joint)
traceback()
devtools::load_all()
# Simple joint test
# Take the first entry of the design list
# emc stores a design list (with length 1 for non-joint models)
# or for joint models length x where x is the number of joint components
design_in <- get_design(samples_LNR)[[1]]
prior_in <- get_prior(samples_LNR)
data_in <- get_data(samples_LNR)
prior_joint <- prior(list(a = design_in, b = design_in))
joint <- make_emc(list(data_in, data_in), list(a = design_in, b = design_in), prior_list = prior_joint)
joint[[1]]$model()
joint[[1]]$model
# Simple joint test
# Take the first entry of the design list
# emc stores a design list (with length 1 for non-joint models)
# or for joint models length x where x is the number of joint components
design_in <- get_design(samples_LNR)[[1]]
prior_in <- get_prior(samples_LNR)
data_in <- get_data(samples_LNR)
prior_joint <- prior(list(a = design_in, b = design_in))
debug(AccumulatR_add_context)
joint <- make_emc(list(data_in, data_in), list(a = design_in, b = design_in), prior_list = prior_joint)
model
model()
# Simple joint test
# Take the first entry of the design list
# emc stores a design list (with length 1 for non-joint models)
# or for joint models length x where x is the number of joint components
design_in <- get_design(samples_LNR)[[1]]
prior_in <- get_prior(samples_LNR)
data_in <- get_data(samples_LNR)
prior_joint <- prior(list(a = design_in, b = design_in))
joint <- make_emc(list(data_in, data_in), list(a = design_in, b = design_in), prior_list = prior_joint)
devtools::load_all()
usethis::use_import_from("AccumulatR", "ensure_native_ctx")
devtools::load_all()
rm(list = ls())
devtools::load_all()
library(AccumulatR)
m1 <- race_spec() |>
add_accumulator("go1", "lognormal") |>
add_accumulator("go2", "lognormal") |>
add_pool("R1", "go1") |>
add_pool("R2", "go2") |>
add_outcome("R1", "R1") |>
add_outcome("R2", "R2") |>
finalize_model()
params_df <- build_param_matrix(m1, c(go1.meanlog = log(0.30),
go1.sdlog = 0.18,
go2.meanlog = log(0.32),
go2.sdlog = 0.18), n_trials = 50)
# 3. Simulate data and compute observed probabilities
sim <- simulate(m1, params_df)
data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
emc <- fit(emc, cores_for_chains = 3)
devtools::load_all()
rm(list = ls())
devtools::load_all()
library(AccumulatR)
m1 <- race_spec() |>
add_accumulator("go1", "lognormal") |>
add_accumulator("go2", "lognormal") |>
add_pool("R1", "go1") |>
add_pool("R2", "go2") |>
add_outcome("R1", "R1") |>
add_outcome("R2", "R2") |>
finalize_model()
params_df <- build_param_matrix(m1, c(go1.meanlog = log(0.30),
go1.sdlog = 0.18,
go2.meanlog = log(0.32),
go2.sdlog = 0.18), n_trials = 50)
# 3. Simulate data and compute observed probabilities
sim <- simulate(m1, params_df)
data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
emc <- fit(emc, cores_for_chains = 3)
rm(list = ls())
devtools::load_all()
library(AccumulatR)
m1 <- race_spec() |>
add_accumulator("go1", "lognormal") |>
add_accumulator("go2", "lognormal") |>
add_pool("R1", "go1") |>
add_pool("R2", "go2") |>
add_outcome("R1", "R1") |>
add_outcome("R2", "R2") |>
finalize_model()
params_df <- build_param_matrix(m1, c(go1.meanlog = log(0.30),
go1.sdlog = 0.18,
go2.meanlog = log(0.32),
go2.sdlog = 0.18), n_trials = 50)
# 3. Simulate data and compute observed probabilities
sim <- simulate(m1, params_df)
data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
emc <- fit(emc, cores_for_chains = 3)
debug(AccumulatR_check_context)
emc <- fit(emc, cores_for_chains = 3)
attr(dat, "AccumulatR_context")
ensure_native_ctx(attr(dat, "AccumulatR_context"))
devtools::load_all()
remove.packages("AccumulatR")
rm(list = ls())
devtools::load_all()
library(AccumulatR)
m1 <- race_spec() |>
add_accumulator("go1", "lognormal") |>
add_accumulator("go2", "lognormal") |>
add_pool("R1", "go1") |>
add_pool("R2", "go2") |>
add_outcome("R1", "R1") |>
add_outcome("R2", "R2") |>
finalize_model()
params_df <- build_param_matrix(m1, c(go1.meanlog = log(0.30),
go1.sdlog = 0.18,
go2.meanlog = log(0.32),
go2.sdlog = 0.18), n_trials = 50)
# 3. Simulate data and compute observed probabilities
sim <- simulate(m1, params_df)
data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
# debug(AccumulatR_check_context)
emc <- fit(emc, cores_for_chains = 3)
.rs.restartR()
rm(list = ls())
devtools::load_all()
library(AccumulatR)
m1 <- race_spec() |>
add_accumulator("go1", "lognormal") |>
add_accumulator("go2", "lognormal") |>
add_pool("R1", "go1") |>
add_pool("R2", "go2") |>
add_outcome("R1", "R1") |>
add_outcome("R2", "R2") |>
finalize_model()
params_df <- build_param_matrix(m1, c(go1.meanlog = log(0.30),
go1.sdlog = 0.18,
go2.meanlog = log(0.32),
go2.sdlog = 0.18), n_trials = 50)
# 3. Simulate data and compute observed probabilities
sim <- simulate(m1, params_df)
data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
# debug(AccumulatR_check_context)
emc <- fit(emc, cores_for_chains = 3)
.rs.restartR()
rm(list = ls())
devtools::load_all()
library(AccumulatR)
m1 <- race_spec() |>
add_accumulator("go1", "lognormal") |>
add_accumulator("go2", "lognormal") |>
add_pool("R1", "go1") |>
add_pool("R2", "go2") |>
add_outcome("R1", "R1") |>
add_outcome("R2", "R2") |>
finalize_model()
params_df <- build_param_matrix(m1, c(go1.meanlog = log(0.30),
go1.sdlog = 0.18,
go2.meanlog = log(0.32),
go2.sdlog = 0.18), n_trials = 50)
# 3. Simulate data and compute observed probabilities
sim <- simulate(m1, params_df)
data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
# debug(AccumulatR_check_context)
emc <- fit(emc, cores_for_chains = 3)
# debug(AccumulatR_check_context)
emc <- fit(emc, cores_for_chains = 1)
devtools::load_all()
# debug(AccumulatR_check_context)
emc <- fit(emc, cores_for_chains = 3)
rm(list = ls())
devtools::load_all()
library(AccumulatR)
m1 <- race_spec() |>
add_accumulator("go1", "lognormal") |>
add_accumulator("go2", "lognormal") |>
add_pool("R1", "go1") |>
add_pool("R2", "go2") |>
add_outcome("R1", "R1") |>
add_outcome("R2", "R2") |>
finalize_model()
params_df <- build_param_matrix(m1, c(go1.meanlog = log(0.30),
go1.sdlog = 0.18,
go2.meanlog = log(0.32),
go2.sdlog = 0.18), n_trials = 50)
# 3. Simulate data and compute observed probabilities
sim <- simulate(m1, params_df)
data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
# debug(AccumulatR_check_context)
emc <- fit(emc, cores_for_chains = 3)
debug(AccumulatR_check_context)
emc <- fit(emc, cores_for_chains = 3)
rm(list = ls())
devtools::load_all()
library(AccumulatR)
m1 <- race_spec() |>
add_accumulator("go1", "lognormal") |>
add_accumulator("go2", "lognormal") |>
add_pool("R1", "go1") |>
add_pool("R2", "go2") |>
add_outcome("R1", "R1") |>
add_outcome("R2", "R2") |>
finalize_model()
params_df <- build_param_matrix(m1, c(go1.meanlog = log(0.30),
go1.sdlog = 0.18,
go2.meanlog = log(0.32),
go2.sdlog = 0.18), n_trials = 50)
# 3. Simulate data and compute observed probabilities
sim <- simulate(m1, params_df)
data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
# debug(AccumulatR_check_context)
emc <- fit(emc, cores_for_chains = 3)
rm(list = ls())
devtools::load_all()
library(AccumulatR)
m1 <- race_spec() |>
add_accumulator("go1", "lognormal") |>
add_accumulator("go2", "lognormal") |>
add_pool("R1", "go1") |>
add_pool("R2", "go2") |>
add_outcome("R1", "R1") |>
add_outcome("R2", "R2") |>
finalize_model()
params_df <- build_param_matrix(m1, c(go1.meanlog = log(0.30),
go1.sdlog = 0.18,
go2.meanlog = log(0.32),
go2.sdlog = 0.18), n_trials = 50)
# 3. Simulate data and compute observed probabilities
sim <- simulate(m1, params_df)
data_df <- data.frame(
trial = sim$trial,
R = sim$R,
rt = sim$rt,
stringsAsFactors = FALSE
)
data <- data_df
data$subjects <- factor(1)
data$R <- factor(data$R)
data$trial <- NULL
EMC2_m1 <- AccumulatR_model(m1)
des <- design(formula = list(p1 ~ 1, p2 ~ 1),
data = data,
model = EMC2_m1)
data_nested <-nest_accumulators(m1, data)
# debug(AccumulatR_add_context)
emc <- make_emc(data, des, type = "single")
devtools::load_all()
init_chains(emc, cores_for_chains = 1)
# debug(AccumulatR_check_context)
emc <- fit(emc, cores_for_chains = 3)
plot(emc)
